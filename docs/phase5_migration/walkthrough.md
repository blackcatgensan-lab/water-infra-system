[walkthrough.md]
# Walkthrough: Phase 5 Migration - Step 3 (Inventory & Routes)

## 概要
本日（2026-02-17）は、物品管理および点検ルート管理機能の実装を完了し、当初発生した既存機能（設備・人材・組織）のUI欠落を修正しました。これにより、現場業務で必要なリソース管理とルート設定が可能になりました。

## 含まれる変更

### 1. 物品管理機能 (Inventory Management)
- **タブ切り替え**: 「共通物品」と「施設別物品」をタブで切り替えて閲覧可能にしました。
- **在庫操作**: 各物品に対して「入庫」「出庫」「棚卸」を記録し、在庫数を即時更新する機能を実装しました（ログ保存対応）。
- **新規登録**: 新しい物品を登録するモーダルを追加しました。

### 2. 点検ルート管理機能 (Route Management)
- **ルート編集**: ルート名の作成・編集に加え、点検対象となる設備を検索して追加する機能を実装しました。
- **順序設定**: ルート内の点検順序をGUI（矢印ボタン）で自由に入れ替えられるようにしました。
- **管理機能**: ルート一覧をカード形式で表示し、各ルートの設備数が一目でわかるようにしました。

### 3. UIの復元と強化 (Restoration & Enhancement)
- **設備管理**: 3ペイン構成（ツリー・詳細・タイムライン）を完全復元し、カード表示にID、メーカー、型番、設置日などの詳細情報を追加しました。
- **人材管理**: 職員カードを詳細表示（役職、雇用形態、バッジ風ID）に戻し、登録/編集フォームの項目（フリガナ、メール、電話等）をすべて復元しました。
- **組織管理**: カード表示から「テーブル形式」に戻し、一覧性を高めました。
- **資格管理**: リスト形式での閲覧と登録/編集機能を復元しました。

## コードの変更点
- **index.html**: Vue.jsコンポーネントの追加（TreeNode, RouteModal等）、状態管理（inventorySubtab, routeDetails等）の追加、およびテンプレートの大幅な修正。
- **Code.gs**: `saveRouteDetails`（ルート詳細一括更新）、`recordInventoryMove`（在庫移動記録）などのバックエンドロジック追加。

## 確認事項
- [ ] ダッシュボードから「物品管理」「点検ルート」タブにアクセスできること。
- [ ] 物品の在庫数が増減し、ログが残ること。
- [ ] 点検ルートを作成し、設備を追加・並べ替えできること。
- [ ] 設備ツリーが正しく表示され、詳細情報がリッチに表示されること。
- [ ] 人材・組織・資格情報が正しく登録・表示されること。
